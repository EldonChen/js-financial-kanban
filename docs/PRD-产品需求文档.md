# PRD - 产品需求文档

> **文档版本**：v1.1  
> **创建时间**：2025-01-06  
> **最后更新**：2025-01-06  
> **适用项目**：js-financial-kanban  
> **文档状态**：正式版

---

## 文档目录

1. [产品愿景](#1-产品愿景)
2. [功能架构设计](#2-功能架构设计)
3. [页面与交互层映射](#3-页面与交互层映射)
4. [Roadmap 规划](#4-roadmap-规划)
5. [附录](#5-附录)

---

## 1. 产品愿景

### 1.1 产品定位

**金融看板系统（Financial Kanban System）**是一个面向金融数据管理与分析的统一看板平台，为个人投资者、金融分析师和开发者提供：

- **多数据源股票信息管理**：统一管理来自不同数据源的股票信息
- **跨服务数据聚合**：聚合多个后端服务的数据，提供统一视图
- **灵活的数据操作**：支持 CRUD 操作、批量更新、实时数据同步
- **可扩展的架构**：支持多语言后端服务、多数据源适配、BFF 层聚合

### 1.2 目标用户

- **个人投资者**：快速查看和管理关注的股票信息
- **金融分析师**：获取和分析多市场股票数据
- **开发者/技术爱好者**：学习和实践多语言后端架构、BFF 模式

### 1.3 核心问题

- **数据分散问题**：股票数据分散在多个数据源，格式不统一
- **服务集成问题**：多个后端服务数据格式不一致
- **数据同步问题**：股票数据需要手动更新，无法实时同步

### 1.4 产品愿景

**长期愿景（1-2年）**：成为个人投资者和量化交易者首选的量化交易算法平台
- 提供开放 API，允许用户在系统内编辑和创建量化交易算法
- 支持实盘交易能力，连接主流券商 API
- 提供算法市场，支持算法分享和交易

**中期愿景（6-12个月）**：构建完整的金融数据管理与量化交易生态系统
- 提供 10+ 预设量化投资算法
- 完整的回测引擎和回测分析功能
- 支持多策略组合回测

**近期愿景（3-6个月）**：完成核心功能，提供可用的 MVP（最小可行产品）

> 详细内容请参考：[PRD-产品愿景.md](./PRD-产品愿景.md)

---

## 2. 功能架构设计

### 2.1 架构层级

```
前端层 (Frontend)
    ↓ HTTP
BFF 层 (Backend For Frontend)
    ↓ HTTP
后台服务层 (Backend Services)
    ↓
数据层 (MongoDB)
```

### 2.2 功能模块划分

#### 2.2.1 核心能力模块

- **股票信息管理模块**：提供股票信息的完整生命周期管理
- **数据聚合模块**：聚合多个后端服务的数据，提供统一视图
- **实时同步模块**：提供实时数据同步和进度追踪

#### 2.2.2 支撑型模块

- **多数据源适配模块**：支持多个股票数据源，自动切换和容错
- **BFF 视图模块**：为前端提供定制化的视图接口
- **数据转换模块**：统一不同服务的数据格式

#### 2.2.3 可扩展/实验性模块

- **数据分析模块**（规划中）：提供股票数据分析和可视化
- **用户系统模块**（规划中）：支持多用户、权限管理
- **通知模块**（规划中）：提供价格预警和通知功能

### 2.3 模块关系

- **依赖关系**：前端 → BFF → 后台服务 → 数据层
- **数据流**：用户操作 → 前端页面 → BFF 视图 → 后台服务 → 数据层

> 详细内容请参考：[PRD-功能架构设计.md](./PRD-功能架构设计.md)

---

## 3. 页面与交互层映射

### 3.1 页面层级结构

```
金融看板系统
├── 首页（Dashboard）
├── 股票管理
│   ├── 股票列表页
│   ├── 股票详情页
│   └── 股票更新页（批量操作）
├── Items 管理（可选）
│   └── Items 列表页
└── 设置
    ├── 账户设置
    ├── 外观设置
    └── 通知设置
```

### 3.2 核心页面

#### 3.2.1 Dashboard（首页）

- **路径**：**`/` 或 `/dashboard`**
- **功能**：系统概览，展示所有服务的统计信息和最近数据
- **API**：`GET /api/bff/v1/views/dashboard`

#### 3.2.2 Stocks 列表页

- **路径**：`/stocks` 或 `/stocks/list`
- **功能**：股票列表，支持搜索、筛选、分页
- **API**：`GET /api/bff/v1/views/stocks`

#### 3.2.3 Stock 详情页

- **路径**：`/stocks/{ticker}` 或 `/stocks/detail?ticker=AAPL`
- **功能**：单个股票的详细信息
- **API**：`GET /api/bff/v1/views/stocks/{ticker}`

#### 3.2.4 批量更新页

- **路径**：`/stocks/batch-update` 或 `/stocks/update`
- **功能**：批量更新股票数据，支持实时进度追踪
- **API**：`POST /api/v1/stocks/fetch-all?delay=1.0`（SSE）

### 3.3 导航结构

```
侧边栏导航（Sidebar）
├── 🏠 Dashboard（首页）
├── 📈 Stocks（股票管理）
│   ├── 股票列表
│   └── 批量更新
├── 📋 Items（可选）
└── ⚙️ Settings（设置）
```

> 详细内容请参考：[PRD-页面与交互层映射.md](./PRD-页面与交互层映射.md)

---

## 4. Roadmap 规划

### 4.1 阶段划分

- **Phase 1：MVP 核心功能**（✅ 已完成）
- **Phase 2：功能完善**（🚧 进行中）
- **Phase 3：体验优化**（🔮 规划中）
- **Phase 4：生态扩展**（🔮 规划中）

### 4.2 Phase 2：功能完善（进行中）

**时间范围**：2025 Q1 - Q2

**交付内容**：

1. **前端页面开发**：
   - Dashboard 页面
   - Stocks 列表页
   - Stock 详情页
   - 批量更新页

2. **功能增强**：
   - 数据源扩展（Tushare、IEX Cloud、Alpha Vantage）
   - 性能优化
   - 错误处理完善

3. **测试和文档**：
   - 单元测试
   - 集成测试
   - 文档完善

### 4.3 Phase 3：体验优化（规划中）

**时间范围**：2025 Q2 - Q3

**交付内容**：

1. **用户体验优化**：
   - 响应式设计（移动端、平板端）
   - 交互优化（加载状态、错误状态、空状态）
   - 视觉优化（主题系统、动画效果）

2. **功能增强**：
   - 数据分析（价格趋势图表、数据对比）
   - 数据导出（CSV、Excel、PDF）
   - 搜索增强（高级搜索、搜索历史）

### 4.4 Phase 4：生态扩展（规划中）

**时间范围**：2025 Q3 - Q4

**交付内容**：

1. **用户系统**：
   - 用户认证（注册/登录、JWT）
   - 权限管理（角色和权限、数据隔离）
   - 个人设置（用户偏好、通知设置）

2. **高级功能**：
   - 股票组合管理
   - 价格预警
   - 数据同步（定时任务、增量更新）

3. **开放生态**：
   - API 开放
   - 插件系统
   - 集成能力（Webhook、第三方集成）

> 详细内容请参考：[PRD-Roadmap规划.md](./PRD-Roadmap规划.md)

---

## 5. 附录

### 5.1 相关文档

- [PRD-产品愿景.md](./PRD-产品愿景.md) - 产品愿景和定位
- [PRD-功能架构设计.md](./PRD-功能架构设计.md) - 功能架构设计
- [PRD-页面与交互层映射.md](./PRD-页面与交互层映射.md) - 页面与交互设计
- [PRD-Roadmap规划.md](./PRD-Roadmap规划.md) - Roadmap 规划

### 5.2 技术文档

- [技术方案设计-BFF层.md](./技术方案设计-BFF层.md) - BFF 层技术方案
- [API文档-股票信息服务.md](./API文档-股票信息服务.md) - 股票信息服务 API
- [BFF-API-规范.md](./BFF-API-规范.md) - BFF API 规范

### 5.3 项目信息

- **项目名称**：js-financial-kanban
- **技术栈**：
  - 前端：Nuxt.js 4 + Vue 3 + Shadcn UI + Tailwind CSS
  - BFF：NestJS
  - 后端：Python FastAPI、Node.js Nest.js、Rust Axum
  - 数据库：MongoDB

### 5.4 联系方式

- **项目仓库**：GitHub（待补充）
- **文档维护**：本文档将根据产品发展持续更新

---

**文档版本历史**：

- **v1.1**（2025-01-06）：更新产品愿景，增加量化交易算法与回测能力（中期），增加量化交易算法平台与实盘交易能力（长期）
- **v1.0**（2025-01-06）：初始版本，包含产品愿景、功能架构、页面映射、Roadmap 规划

---

**最后更新**：2025-01-06  
**维护者**：项目团队

## 更新说明

### v1.1 更新内容（2025-01-06）

1. **中期愿景调整**：
   - 增加"预设量化交易算法与回测"能力
   - 预期提供 10+ 量化投资算法
   - 完整的回测能力和回测分析功能

2. **长期愿景调整**：
   - 移除多语言支持和响应式设计
   - 增加"量化交易算法平台与实盘交易"能力
   - 提供开放 API，允许用户编辑算法并运行回测
   - 增加实盘交易能力
