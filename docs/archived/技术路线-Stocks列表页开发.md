# 技术路线 - Stocks 列表页开发

> 本文档用于跟踪 Stocks 列表页开发任务的进度，任务完成后可归档或删除

## 任务概述

开发 Stocks 列表页，提供股票列表的查看、搜索、筛选、排序、分页等功能。

## 任务拆解

### 任务 1：更新 BFF 层支持分页、筛选、排序参数
**状态**：已完成  
**依赖**：无  
**说明**：
- 更新 `stocks.controller.ts`，添加查询参数（page, page_size, market, market_type, sector, ticker, name, sort_by, sort_order）
- 更新 `stocks.service.ts`，传递参数到 stock-info.client
- 更新 `stock-info.client.ts`，支持查询参数并调用后端服务
- 更新响应格式，支持分页信息（total, page, page_size, total_pages）

### 任务 2：更新前端 API 服务支持查询参数
**状态**：已完成  
**依赖**：任务 1  
**说明**：
- 更新 `app/api/services/stocks.ts`，添加 `getStocks` 方法支持查询参数
- 定义查询参数接口（StocksQueryParams）
- 定义分页响应接口（PaginatedResponse<Stock>）

### 任务 3：创建 Stocks 列表页组件
**状态**：已完成  
**依赖**：任务 2  
**说明**：
- 创建 `app/pages/stocks/index.vue`
- 实现股票列表表格展示
- 实现加载状态和错误处理
- 实现空状态展示

### 任务 4：实现搜索和筛选功能
**状态**：已完成  
**依赖**：任务 3  
**说明**：
- 实现搜索框（按股票代码、名称搜索）
- 实现筛选器（按市场、行业筛选）
- 实现筛选条件的 UI 组件

### 任务 5：实现排序和分页功能
**状态**：已完成  
**依赖**：任务 3  
**说明**：
- 实现表格列排序（按更新时间、市值排序）
- 实现分页组件（每页 20/50/100 条）
- 实现分页状态管理

### 任务 6：实现批量操作功能
**状态**：已完成  
**依赖**：任务 3  
**说明**：
- 实现批量选择功能（全选、单选）
- 实现批量更新功能
- 实现批量删除功能
- 实现批量操作按钮和确认对话框

### 任务 7：优化用户体验和样式
**状态**：已完成  
**依赖**：任务 4, 5, 6  
**说明**：
- 优化加载状态展示
- 优化错误提示
- 优化响应式设计
- 添加跳转到股票详情页的链接
- 完善页面样式和交互

## 注意事项

- 遵循现有的代码风格和组件库（Shadcn UI + Tailwind CSS）
- 使用 BFF 接口：`GET /api/bff/v1/views/stocks`
- 需要处理各种状态：加载、错误、空状态
- 需要响应式设计（桌面端优先）
- 批量操作需要确认对话框

## 检查清单

- [ ] BFF 层支持分页、筛选、排序参数
- [ ] 前端 API 服务支持查询参数
- [ ] Stocks 列表页可以正常访问
- [ ] 股票列表正确显示
- [ ] 搜索功能正常（按代码、名称）
- [ ] 筛选功能正常（按市场、行业）
- [ ] 排序功能正常（按更新时间、市值）
- [ ] 分页功能正常
- [ ] 批量操作功能正常
- [ ] 可以跳转到股票详情页
- [ ] 加载状态和错误处理完善
- [ ] 页面样式符合设计规范
