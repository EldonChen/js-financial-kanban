# PRD - Roadmap 规划

> **文档版本**：v1.1  
> **创建时间**：2025-01-06  
> **最后更新**：2025-01-06  
> **适用项目**：js-financial-kanban

## 1. Roadmap 概览

### 1.1 时间线

```
2025 Q1 (1-3月)         2025 Q2 (4-6月)         2025 Q3 (7-9月)         2025 Q4 (10-12月)
    │                        │                        │                        │
    ├─ Phase 1              ├─ Phase 2              ├─ Phase 3              ├─ Phase 4
    │  MVP 核心功能          │  功能完善              │  量化算法与回测        │  算法平台与实盘
    │  (已完成)              │  (进行中)              │  (规划中)              │  (规划中)
    │                        │                        │                        │
    └────────────────────────┴────────────────────────┴────────────────────────┴──────────────→
```

### 1.2 阶段划分

- **Phase 1：MVP 核心功能**（已完成）
- **Phase 2：功能完善**（进行中）
- **Phase 3：量化交易算法与回测**（规划中）
- **Phase 4：量化交易算法平台与实盘交易**（规划中）

---

## 2. Phase 1：MVP 核心功能（已完成）

**时间范围**：2024 Q4 - 2025 Q1  
**状态**：✅ 已完成

### 2.1 目标

构建最小可行产品（MVP），提供核心功能，验证技术架构可行性。

### 2.2 交付内容

#### 2.2.1 技术架构 ✅

- ✅ **多语言后端服务**：
  - Python FastAPI 服务（Items CRUD）
  - Node.js Nest.js 服务（Items CRUD）
  - Rust Axum 服务（Items CRUD）
  - Python 股票信息服务（多数据源支持）

- ✅ **BFF 层**：
  - Dashboard 视图（数据聚合）
  - Items 视图（数据聚合）
  - Stocks 视图（数据聚合）

- ✅ **前端基础**：
  - Nuxt.js 4 项目初始化
  - Shadcn UI 组件库集成
  - 基础布局和导航

#### 2.2.2 核心功能 ✅

- ✅ **股票信息管理**：
  - 股票查询（列表、详情、筛选）
  - 股票更新（单个、批量、全量）
  - 股票删除（单个、批量、全量）

- ✅ **多数据源支持**：
  - akshare（A股）
  - yfinance（美股/港股）
  - easyquotation（A股实时）
  - 自动容错和切换

- ✅ **实时同步**：
  - SSE 实时进度推送
  - 批量更新进度追踪

- ✅ **数据聚合**：
  - BFF 层聚合多个服务数据
  - 统一数据格式

### 2.3 与现有系统能力的复用关系

- **复用**：
  - 复用现有的三个后端服务（Python/Node/Rust）
  - 复用现有的股票信息服务
  - 复用现有的 BFF 层架构

- **新增**：
  - 新增前端页面（Dashboard、Stocks List、Stock Detail）
  - 新增批量更新功能的前端界面
  - 新增 SSE 进度追踪的前端实现

### 2.4 验收标准

- ✅ 所有后端服务正常运行
- ✅ BFF 层可以聚合数据
- ✅ 前端可以调用 BFF 接口
- ✅ 股票信息管理功能完整
- ✅ 多数据源支持正常

---

## 3. Phase 2：功能完善（进行中）

**时间范围**：2025 Q1 - Q2  
**状态**：🚧 进行中

### 3.1 目标

完善核心功能，提升用户体验，增强系统稳定性。

### 3.2 交付内容

#### 3.2.1 前端页面开发 🚧

- [ ] **Dashboard 页面**：
  - [ ] 统计数据展示（Total Items、Total Stocks）
  - [ ] 最近 Items 列表
  - [ ] 最近 Stocks 列表
  - [ ] 数据刷新功能
  - [ ] 时间范围选择

- [ ] **Stocks 列表页**：
  - [ ] 股票列表展示（表格/卡片）
  - [ ] 搜索功能（按代码、名称）
  - [ ] 筛选功能（按市场、行业）
  - [ ] 排序功能（按更新时间、市值）
  - [ ] 分页功能
  - [ ] 批量操作（批量更新、批量删除）

- [ ] **Stock 详情页**：
  - [ ] 股票详细信息展示
  - [ ] 基本信息（代码、名称、市场）
  - [ ] 财务指标（市值、P/E、P/B、股息率）
  - [ ] 数据源信息
  - [ ] 更新/删除操作

- [ ] **批量更新页**：
  - [ ] 更新选项（全量/选择/按市场）
  - [ ] 延迟设置
  - [ ] 实时进度展示（SSE）
  - [ ] 进度可视化（进度条、统计信息）
  - [ ] 错误处理和重试

#### 3.2.2 功能增强 🚧

- [ ] **数据源扩展**：
  - [ ] 接入 Tushare（A股备用数据源）
  - [ ] 接入 IEX Cloud（美股备用数据源）
  - [ ] 接入 Alpha Vantage（美股备用数据源）

- [ ] **性能优化**：
  - [ ] 添加 Redis 缓存（可选）
  - [ ] 优化数据库查询
  - [ ] 优化 BFF 层聚合性能

- [ ] **错误处理**：
  - [ ] 统一错误响应格式
  - [ ] 完善错误提示
  - [ ] 降级处理策略

#### 3.2.3 测试和文档 🚧

- [ ] **单元测试**：
  - [ ] 前端组件测试
  - [ ] BFF 层服务测试
  - [ ] 后端服务测试

- [ ] **集成测试**：
  - [ ] 端到端测试
  - [ ] API 集成测试

- [ ] **文档完善**：
  - [ ] API 文档
  - [ ] 用户手册
  - [ ] 开发文档

### 3.3 优先级

**P0 - 必须完成**：
- Dashboard 页面
- Stocks 列表页
- Stock 详情页
- 批量更新页

**P1 - 重要**：
- 数据源扩展
- 性能优化
- 错误处理

**P2 - 可选**：
- 测试覆盖
- 文档完善

### 3.4 验收标准

- [ ] 所有核心页面可以正常访问
- [ ] 股票信息管理功能完整可用
- [ ] 批量更新功能正常，进度追踪准确
- [ ] 系统性能满足要求（响应时间 < 500ms）
- [ ] 错误处理完善，用户体验良好

---

## 4. Phase 3：量化交易算法与回测（规划中）

**时间范围**：2025 Q2 - Q3  
**状态**：🔮 规划中

### 4.1 目标

提供预设量化交易算法和完整的回测能力，构建量化交易基础能力。

### 4.2 交付内容

#### 4.2.1 预设量化交易算法 🔮

- [ ] **算法库开发**：
  - [ ] 提供 10+ 预设量化投资算法：
    - [ ] 均线策略（MA Strategy）
    - [ ] 动量策略（Momentum Strategy）
    - [ ] 均值回归策略（Mean Reversion Strategy）
    - [ ] 配对交易策略（Pairs Trading Strategy）
    - [ ] 统计套利策略（Statistical Arbitrage）
    - [ ] 布林带策略（Bollinger Bands Strategy）
    - [ ] RSI 策略（RSI Strategy）
    - [ ] MACD 策略（MACD Strategy）
    - [ ] 双均线交叉策略（Dual MA Crossover）
    - [ ] 网格交易策略（Grid Trading Strategy）
    - [ ] 更多策略（根据需求扩展）

- [ ] **算法管理**：
  - [ ] 算法列表展示
  - [ ] 算法详情查看
  - [ ] 算法参数配置
  - [ ] 算法版本管理

#### 4.2.2 回测引擎 🔮

- [ ] **回测核心功能**：
  - [ ] 历史数据回测引擎
  - [ ] 支持多时间周期（日线、周线、月线）
  - [ ] 支持自定义回测参数：
    - [ ] 起始资金
    - [ ] 手续费率
    - [ ] 滑点设置
    - [ ] 回测时间范围
  - [ ] 支持多策略组合回测
  - [ ] 回测结果存储和管理

- [ ] **回测分析功能**：
  - [ ] **收益分析**：
    - [ ] 总收益、年化收益
    - [ ] 夏普比率
    - [ ] 最大回撤
    - [ ] 收益曲线
  - [ ] **风险分析**：
    - [ ] 波动率
    - [ ] VaR（风险价值）
    - [ ] 最大回撤
    - [ ] 回撤曲线
  - [ ] **交易分析**：
    - [ ] 交易次数统计
    - [ ] 胜率分析
    - [ ] 平均持仓时间
    - [ ] 盈亏分布
  - [ ] **可视化图表**：
    - [ ] 收益曲线图
    - [ ] 回撤曲线图
    - [ ] 持仓分布图
    - [ ] 交易信号图

#### 4.2.3 量化交易服务 🔮

- [ ] **后端服务开发**：
  - [ ] 量化交易服务（Python/Node.js）
  - [ ] 算法执行引擎
  - [ ] 回测引擎
  - [ ] 数据接口（历史数据、实时数据）

- [ ] **前端界面开发**：
  - [ ] 算法列表页
  - [ ] 算法详情页
  - [ ] 回测配置页
  - [ ] 回测结果页
  - [ ] 回测分析页

#### 4.2.4 数据支持 🔮

- [ ] **历史数据**：
  - [ ] 历史K线数据获取和存储
  - [ ] 历史数据管理
  - [ ] 数据质量检查

- [ ] **技术指标**：
  - [ ] 常用技术指标计算（MA、RSI、MACD、布林带等）
  - [ ] 指标数据缓存
  - [ ] 指标可视化

### 4.3 优先级

**P0 - 必须完成**：
- 预设量化交易算法（10+ 算法）
- 回测引擎核心功能
- 回测分析功能（收益、风险、交易分析）

**P1 - 重要**：
- 回测可视化图表
- 多策略组合回测
- 历史数据管理

**P2 - 可选**：
- 算法版本管理
- 高级回测参数

### 4.4 验收标准

- [ ] 提供 10+ 预设量化投资算法
- [ ] 回测引擎可以正常运行，支持历史数据回测
- [ ] 回测分析功能完整（收益、风险、交易分析）
- [ ] 回测可视化图表正常显示
- [ ] 系统性能满足要求（回测速度 < 1 分钟，单策略）

---

## 5. Phase 4：量化交易算法平台与实盘交易（规划中）

**时间范围**：2025 Q3 - Q4  
**状态**：🔮 规划中

### 5.1 目标

构建量化交易算法平台，支持用户自定义算法编辑和运行，并提供实盘交易能力。

### 5.2 交付内容

#### 5.2.1 量化交易算法平台 🔮

- [ ] **算法编辑器**：
  - [ ] 在线代码编辑器（支持 Python、JavaScript）
  - [ ] 代码高亮和自动补全
  - [ ] 语法检查
  - [ ] 代码模板和示例

- [ ] **算法管理**：
  - [ ] 用户自定义算法创建和编辑
  - [ ] 算法版本管理（Git 集成）
  - [ ] 算法分享和协作
  - [ ] 算法市场（可选）

- [ ] **算法执行**：
  - [ ] 算法运行环境（沙箱）
  - [ ] 算法调试和测试
  - [ ] 算法性能监控
  - [ ] 算法日志和错误处理

- [ ] **开放 API**：
  - [ ] 算法编辑 API
  - [ ] 算法运行 API
  - [ ] 回测 API
  - [ ] 数据获取 API
  - [ ] API 文档和 SDK

#### 5.2.2 实盘交易能力 🔮

- [ ] **券商 API 集成**：
  - [ ] 支持主流券商 API（如富途、盈透证券、Interactive Brokers 等）
  - [ ] 统一交易接口抽象
  - [ ] 多券商支持（可切换）

- [ ] **交易执行引擎**：
  - [ ] 订单管理（下单、撤单、查询）
  - [ ] 持仓管理
  - [ ] 资金管理
  - [ ] 交易风控（止损、止盈、仓位控制）

- [ ] **实盘交易功能**：
  - [ ] 策略回测后直接部署到实盘
  - [ ] 实盘交易监控
  - [ ] 交易记录和统计
  - [ ] 模拟交易和实盘交易切换

- [ ] **风控管理**：
  - [ ] 风险参数设置
  - [ ] 实时风险监控
  - [ ] 风险预警和通知
  - [ ] 自动止损和风控规则

#### 5.2.3 用户系统 🔮

- [ ] **用户认证**：
  - [ ] 用户注册/登录
  - [ ] JWT Token 认证
  - [ ] 密码重置

- [ ] **权限管理**：
  - [ ] 角色和权限
  - [ ] 数据隔离（用户算法、交易记录）
  - [ ] 操作审计

- [ ] **个人设置**：
  - [ ] 用户偏好配置
  - [ ] 通知设置
  - [ ] 交易设置（券商账户绑定）

#### 5.2.4 高级功能 🔮

- [ ] **股票组合管理**：
  - [ ] 创建股票组合
  - [ ] 组合分析
  - [ ] 组合对比

- [ ] **价格预警**：
  - [ ] 设置价格阈值
  - [ ] 触发通知（邮件/WebSocket）
  - [ ] 通知历史

- [ ] **数据同步**：
  - [ ] 定时任务（定时更新股票数据）
  - [ ] 增量更新
  - [ ] 数据版本管理

### 5.3 优先级

**P0 - 必须完成**：
- 量化交易算法平台（算法编辑器、算法管理）
- 实盘交易能力（券商 API 集成、交易执行引擎）
- 开放 API

**P1 - 重要**：
- 用户系统
- 风控管理
- 算法市场（可选）

**P2 - 可选**：
- 股票组合管理
- 价格预警
- 插件系统

### 5.4 验收标准

- [ ] 用户可以在系统内编辑和创建量化交易算法
- [ ] 算法可以正常运行回测
- [ ] 支持连接主流券商 API
- [ ] 实盘交易功能正常，交易延迟 < 100ms
- [ ] 开放 API 完整可用，提供 API 文档和 SDK
- [ ] 系统稳定性和安全性满足要求

---

## 6. 功能演进优先级

### 6.1 近期（1-3个月）

**P0 - 必须完成**：
1. Dashboard 页面开发
2. Stocks 列表页开发
3. Stock 详情页开发
4. 批量更新页开发

**P1 - 重要**：
1. 数据源扩展（Tushare、IEX Cloud）
2. 性能优化
3. 错误处理完善

### 6.2 中期（3-6个月）

**P0 - 必须完成**：
1. 预设量化交易算法（10+ 算法）
2. 回测引擎核心功能
3. 回测分析功能

**P1 - 重要**：
1. 回测可视化图表
2. 多策略组合回测
3. 历史数据管理

### 6.3 长期（6-12个月）

**P0 - 必须完成**：
1. 量化交易算法平台（算法编辑器、算法管理）
2. 实盘交易能力（券商 API 集成、交易执行引擎）
3. 开放 API

**P1 - 重要**：
1. 用户系统
2. 风控管理
3. 算法市场（可选）

---

## 7. 风险与应对

### 7.1 技术风险

**风险**：数据源不稳定，API 变更  
**应对**：多数据源容错，定期监控和更新

**风险**：性能瓶颈  
**应对**：性能测试，优化查询，添加缓存

### 7.2 业务风险

**风险**：需求变更  
**应对**：灵活架构，模块化设计，快速迭代

**风险**：用户反馈不足  
**应对**：MVP 验证，用户调研，持续改进

---

## 8. 成功指标

### 8.1 Phase 2 成功指标

- ✅ 所有核心页面开发完成
- ✅ 功能完整可用
- ✅ 系统性能满足要求
- ✅ 用户体验良好

### 8.2 Phase 3 成功指标

- ✅ 提供 10+ 预设量化投资算法
- ✅ 回测引擎可以正常运行
- ✅ 回测分析功能完整（收益、风险、交易分析）
- ✅ 回测可视化图表正常显示
- ✅ 回测性能满足要求（回测速度 < 1 分钟，单策略）

### 8.3 Phase 4 成功指标

- ✅ 用户可以在系统内编辑和创建量化交易算法
- ✅ 算法可以正常运行回测
- ✅ 支持连接主流券商 API
- ✅ 实盘交易功能正常，交易延迟 < 100ms
- ✅ 开放 API 完整可用，提供 API 文档和 SDK
- ✅ 系统稳定性和安全性满足要求

---

**文档维护**：本文档将根据项目进展持续更新

## 更新说明

### v1.1 更新内容（2025-01-06）

1. **Phase 3 调整**：
   - 从"体验优化"调整为"量化交易算法与回测"
   - 增加预设量化交易算法（10+ 算法）
   - 增加回测引擎和回测分析功能
   - 移除响应式设计和多语言支持相关内容

2. **Phase 4 调整**：
   - 从"生态扩展"调整为"量化交易算法平台与实盘交易"
   - 增加量化交易算法平台（算法编辑器、算法管理、开放 API）
   - 增加实盘交易能力（券商 API 集成、交易执行引擎、风控管理）
   - 保留用户系统、股票组合管理、价格预警等高级功能
