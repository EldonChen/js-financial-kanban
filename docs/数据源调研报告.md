# 股票数据源调研报告

> **调研时间**：2024年  
> **调研目的**：为股票基本信息模块选择合适的数据源，支持多市场覆盖

## 调研范围

本次调研覆盖以下数据源：

### A 股市场数据源
1. **Tushare** - A 股数据专业平台
2. **akshare** - 免费开源股票数据接口
3. **easyquotation** - A 股实时行情库
4. **stock-api** - 基于 akshare 的股票 API
5. **东方财富网** - 通过爬虫或 API 获取
6. **新浪财经** - 通过 API 或爬虫获取
7. **腾讯财经** - 通过 API 或爬虫获取
8. **同花顺** - 通过爬虫获取
9. **聚宽数据** - 量化交易平台数据
10. **米筐数据** - 量化交易平台数据

### 美股市场数据源
1. **yfinance** - Yahoo Finance 数据（已使用）
2. **Alpha Vantage** - 免费/付费 API
3. **IEX Cloud** - 免费/付费 API
4. **Polygon.io** - 付费 API
5. **Finnhub** - 免费/付费 API
6. **Twelve Data** - 免费/付费 API
7. **Quandl** - 数据平台（部分免费）

### 港股市场数据源
1. **yfinance** - Yahoo Finance 数据（已使用）
2. **富途 API** - 富途证券 API
3. **雪球 API** - 雪球财经 API
4. **akshare** - 支持部分港股数据

### 通用数据平台
1. **聚宽数据** - 支持 A 股、港股、美股
2. **米筐数据** - 支持 A 股、港股、美股
3. **掘金数据** - 支持 A 股、港股、美股

## 数据源详细调研

### 1. Tushare

#### 基本信息
- **官网**：https://tushare.pro/
- **GitHub**：https://github.com/waditu/tushare
- **语言**：Python
- **许可证**：商业/免费（积分制）

#### 市场覆盖
- ✅ **A 股**：完整支持，包括沪深两市所有股票
- ❌ **港股**：不支持
- ❌ **美股**：不支持

#### 核心功能
- ✅ **股票基本信息**：股票代码、名称、行业、板块等
- ✅ **全量股票列表**：支持获取所有 A 股股票代码列表
- ✅ **财务数据**：财务报表、财务指标
- ✅ **行情数据**：历史行情、实时行情
- ✅ **基本面数据**：公司基本信息、股东信息等

#### 数据字段示例
```python
# 股票基本信息
{
    "ts_code": "000001.SZ",      # Tushare 股票代码
    "symbol": "000001",           # 股票代码
    "name": "平安银行",           # 股票名称
    "area": "深圳",               # 地区
    "industry": "银行",           # 行业
    "market": "中小板",           # 市场
    "list_date": "19910403",     # 上市日期
    "exchange": "SZSE",          # 交易所
}
```

#### 访问限制
- **认证方式**：需要注册账号并获取 token
- **积分制度**：免费用户有积分限制，不同接口需要不同积分
- **频率限制**：有请求频率限制（根据积分等级）
- **IP 限制**：无特殊 IP 限制

#### 使用示例
```python
import tushare as ts

# 设置 token
ts.set_token('your_token_here')
pro = ts.pro_api()

# 获取股票基本信息
df = pro.stock_basic(exchange='', list_status='L', fields='ts_code,symbol,name,area,industry,list_date')

# 获取全量股票列表
df = pro.stock_basic(exchange='', list_status='L')
```

#### 优缺点分析

**优点**：
- ✅ 数据完整、准确（官方数据源）
- ✅ 支持全量股票列表
- ✅ 文档完善，社区活跃
- ✅ 数据更新及时

**缺点**：
- ❌ 需要注册和 token
- ❌ 免费用户有积分限制
- ❌ 仅支持 A 股市场
- ❌ 需要网络连接

#### 可维护性
- **社区活跃度**：⭐⭐⭐⭐⭐（非常活跃）
- **更新频率**：⭐⭐⭐⭐⭐（持续更新）
- **文档质量**：⭐⭐⭐⭐⭐（文档完善）
- **代码可读性**：⭐⭐⭐⭐（代码清晰）

---

### 2. easyquotation

#### 基本信息
- **GitHub**：https://github.com/shidenggui/easyquotation
- **语言**：Python
- **许可证**：MIT（开源免费）

#### 市场覆盖
- ✅ **A 股**：支持实时行情
- ❌ **港股**：不支持
- ❌ **美股**：不支持

#### 核心功能
- ✅ **实时行情**：支持 A 股实时行情数据
- ✅ **股票基本信息**：股票代码、名称、价格等
- ❌ **全量股票列表**：不支持获取全量股票列表（需要自己提供股票代码）
- ❌ **历史数据**：不支持历史数据

#### 数据字段示例
```python
# 实时行情数据
{
    "000001": {
        "name": "平安银行",
        "now": 12.34,           # 当前价格
        "open": 12.00,           # 开盘价
        "close": 12.50,          # 昨收价
        "high": 12.60,           # 最高价
        "low": 11.90,            # 最低价
        "volume": 12345678,      # 成交量
        "turnover": 152345678,   # 成交额
    }
}
```

#### 访问限制
- **认证方式**：无需认证
- **频率限制**：无明确限制，但建议控制请求频率
- **IP 限制**：无特殊 IP 限制
- **数据来源**：从新浪财经、腾讯财经等抓取

#### 使用示例
```python
import easyquotation

# 使用新浪财经数据源
quotation = easyquotation.use('sina')

# 获取实时行情
data = quotation.real(['000001', '000002'])

# 获取所有股票实时行情（需要提供股票代码列表）
all_data = quotation.real(['000001', '000002', ...])
```

#### 优缺点分析

**优点**：
- ✅ 完全免费，无需注册
- ✅ 实时性好
- ✅ 使用简单
- ✅ 开源，可自行维护

**缺点**：
- ❌ 不支持全量股票列表获取
- ❌ 数据来源不稳定（依赖第三方网站）
- ❌ 可能被反爬虫机制影响
- ❌ 仅支持实时行情，不支持历史数据
- ❌ 字段相对简单，缺少行业、板块等信息

#### 可维护性
- **社区活跃度**：⭐⭐⭐（中等活跃）
- **更新频率**：⭐⭐⭐（偶尔更新）
- **文档质量**：⭐⭐⭐（文档一般）
- **代码可读性**：⭐⭐⭐⭐（代码清晰）

---

### 3. stock-api（akshare 封装）

#### 基本信息
- **GitHub**：https://github.com/zhangxiangliang/stock-api
- **底层依赖**：akshare
- **语言**：Python
- **许可证**：MIT（开源免费）

#### 市场覆盖
- ✅ **A 股**：支持（基于 akshare）
- ✅ **港股**：部分支持（基于 akshare）
- ✅ **美股**：部分支持（基于 akshare）

#### 核心功能
- ✅ **股票基本信息**：股票代码、名称、行业等
- ✅ **全量股票列表**：支持获取 A 股全量股票列表
- ✅ **行情数据**：历史行情、实时行情
- ✅ **财务数据**：财务报表、财务指标

#### 数据字段示例
```python
# 股票基本信息（基于 akshare）
{
    "代码": "000001",
    "名称": "平安银行",
    "行业": "银行",
    "地区": "深圳",
    "上市日期": "1991-04-03",
    "交易所": "深交所",
}
```

#### 访问限制
- **认证方式**：无需认证
- **频率限制**：无明确限制，但建议控制请求频率
- **IP 限制**：无特殊 IP 限制
- **数据来源**：从多个数据源抓取（东方财富、新浪等）

#### 使用示例
```python
import stock_api

# 获取股票基本信息
data = stock_api.get_stock_info('000001')

# 获取全量股票列表
all_stocks = stock_api.get_all_stocks()
```

**注意**：stock-api 是 akshare 的封装，实际使用可能需要直接使用 akshare。

#### akshare 使用示例
```python
import akshare as ak

# 获取 A 股股票列表
df = ak.stock_info_a_code_name()

# 获取股票基本信息
df = ak.stock_individual_info_em(symbol="000001")
```

#### 优缺点分析

**优点**：
- ✅ 完全免费，无需注册
- ✅ 支持多市场（A 股、港股、美股）
- ✅ 支持全量股票列表
- ✅ 数据源多样（多个数据源聚合）

**缺点**：
- ❌ 数据来源不稳定（依赖第三方网站抓取）
- ❌ 可能被反爬虫机制影响
- ❌ 数据更新可能不及时
- ❌ 文档相对简单

#### 可维护性
- **社区活跃度**：⭐⭐⭐⭐（akshare 非常活跃）
- **更新频率**：⭐⭐⭐⭐（akshare 持续更新）
- **文档质量**：⭐⭐⭐（akshare 文档完善，stock-api 文档较少）
- **代码可读性**：⭐⭐⭐（代码较复杂）

---

### 4. yfinance（已使用，作为对比）

#### 基本信息
- **GitHub**：https://github.com/ranaroussi/yfinance
- **语言**：Python
- **许可证**：Apache 2.0（开源免费）

#### 市场覆盖
- ✅ **美股**：完整支持
- ✅ **港股**：支持
- ❌ **A 股**：不支持（或支持有限）

#### 核心功能
- ✅ **股票基本信息**：股票代码、名称、行业、板块等
- ✅ **全量股票列表**：支持获取（通过多种方式）
- ✅ **历史数据**：支持历史行情数据
- ✅ **财务数据**：支持财务报表、财务指标

#### 访问限制
- **认证方式**：无需认证
- **频率限制**：有请求频率限制（Yahoo Finance 限制）
- **IP 限制**：在中国大陆可能访问受限（需要代理）
- **数据来源**：Yahoo Finance

#### 优缺点分析

**优点**：
- ✅ 完全免费，无需注册
- ✅ 支持美股和港股
- ✅ 数据完整
- ✅ 使用简单

**缺点**：
- ❌ 在中国大陆访问受限
- ❌ 有请求频率限制
- ❌ 不支持 A 股

---

### 5. akshare（详细调研）

#### 基本信息
- **GitHub**：https://github.com/akfamily/akshare
- **官网**：https://akshare.akfamily.xyz/
- **语言**：Python
- **许可证**：MIT（开源免费）

#### 市场覆盖
- ✅ **A 股**：完整支持，包括沪深两市所有股票
- ✅ **港股**：部分支持
- ✅ **美股**：部分支持
- ✅ **其他市场**：支持部分其他市场数据

#### 核心功能
- ✅ **股票基本信息**：股票代码、名称、行业、板块等
- ✅ **全量股票列表**：支持获取 A 股全量股票代码列表
- ✅ **行情数据**：历史行情、实时行情
- ✅ **财务数据**：财务报表、财务指标
- ✅ **基本面数据**：公司基本信息、股东信息等

#### 数据字段示例
```python
# A 股股票列表
{
    "code": "000001",
    "name": "平安银行",
    "industry": "银行",
    "area": "深圳",
    "list_date": "1991-04-03",
    "exchange": "深交所",
}
```

#### 访问限制
- **认证方式**：无需认证
- **频率限制**：无明确限制，但建议控制请求频率
- **IP 限制**：无特殊 IP 限制
- **数据来源**：从多个数据源抓取（东方财富、新浪、腾讯等）

#### 使用示例
```python
import akshare as ak

# 获取 A 股股票列表
df = ak.stock_info_a_code_name()

# 获取股票基本信息
df = ak.stock_individual_info_em(symbol="000001")

# 获取港股股票列表
df = ak.stock_info_hk_name_code()
```

#### 优缺点分析

**优点**：
- ✅ 完全免费，无需注册
- ✅ 支持多市场（A 股、港股、美股）
- ✅ 支持全量股票列表
- ✅ 数据源多样（多个数据源聚合）
- ✅ 社区活跃，持续更新
- ✅ 文档相对完善

**缺点**：
- ❌ 数据来源不稳定（依赖第三方网站抓取）
- ❌ 可能被反爬虫机制影响
- ❌ 数据更新可能不及时
- ❌ 接口可能因网站改版而失效

#### 可维护性
- **社区活跃度**：⭐⭐⭐⭐⭐（非常活跃）
- **更新频率**：⭐⭐⭐⭐⭐（持续更新）
- **文档质量**：⭐⭐⭐⭐（文档完善）
- **代码可读性**：⭐⭐⭐⭐（代码清晰）

---

### 6. Alpha Vantage

#### 基本信息
- **官网**：https://www.alphavantage.co/
- **语言**：Python（官方 SDK）
- **许可证**：免费/付费

#### 市场覆盖
- ✅ **美股**：完整支持
- ✅ **全球市场**：支持部分全球市场
- ❌ **A 股**：不支持
- ❌ **港股**：不支持

#### 核心功能
- ✅ **股票基本信息**：股票代码、名称等
- ✅ **实时行情**：实时价格数据
- ✅ **历史数据**：历史行情数据
- ✅ **技术指标**：各种技术分析指标
- ❌ **全量股票列表**：不支持（需要提供股票代码）

#### 访问限制
- **认证方式**：需要 API Key（免费注册）
- **频率限制**：
  - 免费版：5 次/分钟，500 次/天
  - 付费版：更高限制
- **IP 限制**：无特殊 IP 限制

#### 使用示例
```python
from alpha_vantage.timeseries import TimeSeries

ts = TimeSeries(key='YOUR_API_KEY', output_format='pandas')
data, meta_data = ts.get_intraday(symbol='AAPL', interval='1min', outputsize='full')
```

#### 优缺点分析

**优点**：
- ✅ 免费版可用（有频率限制）
- ✅ 数据质量高
- ✅ API 稳定
- ✅ 支持实时和历史数据

**缺点**：
- ❌ 免费版频率限制较严格
- ❌ 不支持 A 股和港股
- ❌ 不支持全量股票列表
- ❌ 需要注册 API Key

#### 可维护性
- **社区活跃度**：⭐⭐⭐⭐（活跃）
- **更新频率**：⭐⭐⭐⭐（持续更新）
- **文档质量**：⭐⭐⭐⭐⭐（文档完善）
- **代码可读性**：⭐⭐⭐⭐（代码清晰）

---

### 7. IEX Cloud

#### 基本信息
- **官网**：https://iexcloud.io/
- **语言**：Python（官方 SDK）
- **许可证**：免费/付费

#### 市场覆盖
- ✅ **美股**：完整支持
- ❌ **A 股**：不支持
- ❌ **港股**：不支持

#### 核心功能
- ✅ **股票基本信息**：股票代码、名称、行业等
- ✅ **实时行情**：实时价格数据
- ✅ **历史数据**：历史行情数据
- ✅ **财务数据**：财务报表、财务指标
- ✅ **全量股票列表**：支持获取所有美股股票列表

#### 访问限制
- **认证方式**：需要 API Key（免费注册）
- **频率限制**：
  - 免费版：50,000 次/月
  - 付费版：更高限制
- **IP 限制**：无特殊 IP 限制

#### 使用示例
```python
import requests

# 获取股票信息
response = requests.get(
    f'https://cloud.iexapis.com/stable/stock/AAPL/company?token=YOUR_API_KEY'
)
```

#### 优缺点分析

**优点**：
- ✅ 免费版额度较高（50,000 次/月）
- ✅ 数据质量高
- ✅ API 稳定
- ✅ 支持全量股票列表
- ✅ 支持财务数据

**缺点**：
- ❌ 仅支持美股
- ❌ 需要注册 API Key
- ❌ 免费版有月度限制

#### 可维护性
- **社区活跃度**：⭐⭐⭐⭐（活跃）
- **更新频率**：⭐⭐⭐⭐（持续更新）
- **文档质量**：⭐⭐⭐⭐⭐（文档完善）
- **代码可读性**：⭐⭐⭐⭐（代码清晰）

---

### 8. Polygon.io

#### 基本信息
- **官网**：https://polygon.io/
- **语言**：Python（官方 SDK）
- **许可证**：付费（有免费试用）

#### 市场覆盖
- ✅ **美股**：完整支持
- ❌ **A 股**：不支持
- ❌ **港股**：不支持

#### 核心功能
- ✅ **股票基本信息**：股票代码、名称等
- ✅ **实时行情**：实时价格数据
- ✅ **历史数据**：历史行情数据
- ✅ **全量股票列表**：支持获取所有美股股票列表

#### 访问限制
- **认证方式**：需要 API Key（付费）
- **频率限制**：根据付费计划
- **IP 限制**：无特殊 IP 限制

#### 优缺点分析

**优点**：
- ✅ 数据质量高
- ✅ API 稳定
- ✅ 支持实时和历史数据
- ✅ 支持全量股票列表

**缺点**：
- ❌ 需要付费
- ❌ 仅支持美股
- ❌ 不适合免费使用场景

#### 可维护性
- **社区活跃度**：⭐⭐⭐⭐（活跃）
- **更新频率**：⭐⭐⭐⭐（持续更新）
- **文档质量**：⭐⭐⭐⭐⭐（文档完善）
- **代码可读性**：⭐⭐⭐⭐（代码清晰）

---

### 9. Finnhub

#### 基本信息
- **官网**：https://finnhub.io/
- **语言**：Python（官方 SDK）
- **许可证**：免费/付费

#### 市场覆盖
- ✅ **美股**：完整支持
- ✅ **全球市场**：支持部分全球市场
- ❌ **A 股**：不支持
- ❌ **港股**：不支持

#### 核心功能
- ✅ **股票基本信息**：股票代码、名称等
- ✅ **实时行情**：实时价格数据
- ✅ **历史数据**：历史行情数据
- ✅ **财务数据**：财务报表、财务指标
- ❌ **全量股票列表**：不支持（需要提供股票代码）

#### 访问限制
- **认证方式**：需要 API Key（免费注册）
- **频率限制**：
  - 免费版：60 次/分钟
  - 付费版：更高限制
- **IP 限制**：无特殊 IP 限制

#### 优缺点分析

**优点**：
- ✅ 免费版可用
- ✅ 数据质量高
- ✅ API 稳定
- ✅ 支持财务数据

**缺点**：
- ❌ 免费版频率限制较严格
- ❌ 不支持 A 股和港股
- ❌ 不支持全量股票列表

#### 可维护性
- **社区活跃度**：⭐⭐⭐⭐（活跃）
- **更新频率**：⭐⭐⭐⭐（持续更新）
- **文档质量**：⭐⭐⭐⭐⭐（文档完善）
- **代码可读性**：⭐⭐⭐⭐（代码清晰）

---

### 10. 东方财富网（爬虫/API）

#### 基本信息
- **官网**：https://www.eastmoney.com/
- **数据获取方式**：爬虫或第三方封装
- **语言**：Python
- **许可证**：免费（需遵守网站使用条款）

#### 市场覆盖
- ✅ **A 股**：完整支持
- ✅ **港股**：部分支持
- ✅ **美股**：部分支持

#### 核心功能
- ✅ **股票基本信息**：股票代码、名称、行业等
- ✅ **全量股票列表**：支持获取 A 股全量股票列表
- ✅ **实时行情**：实时价格数据
- ✅ **历史数据**：历史行情数据
- ✅ **财务数据**：财务报表、财务指标

#### 访问限制
- **认证方式**：无需认证（但需遵守使用条款）
- **频率限制**：建议控制请求频率，避免被封禁
- **IP 限制**：可能对频繁请求进行限制
- **数据来源**：东方财富网

#### 使用示例
```python
# 通过 akshare 使用东方财富数据
import akshare as ak

# 获取 A 股股票列表（数据来源：东方财富）
df = ak.stock_info_a_code_name()
```

#### 优缺点分析

**优点**：
- ✅ 完全免费
- ✅ 数据完整
- ✅ 支持多市场
- ✅ 支持全量股票列表

**缺点**：
- ❌ 需要爬虫技术（或使用封装库如 akshare）
- ❌ 可能被反爬虫机制影响
- ❌ 网站改版可能导致接口失效
- ❌ 需要遵守网站使用条款

#### 可维护性
- **社区活跃度**：⭐⭐⭐（通过 akshare 等封装库使用）
- **更新频率**：⭐⭐⭐（依赖网站更新）
- **文档质量**：⭐⭐⭐（通过封装库文档）
- **代码可读性**：⭐⭐⭐（通过封装库使用）

---

### 11. 聚宽数据

#### 基本信息
- **官网**：https://www.joinquant.com/
- **语言**：Python
- **许可证**：免费/付费

#### 市场覆盖
- ✅ **A 股**：完整支持
- ✅ **港股**：支持
- ✅ **美股**：支持

#### 核心功能
- ✅ **股票基本信息**：股票代码、名称、行业等
- ✅ **全量股票列表**：支持获取全量股票列表
- ✅ **行情数据**：历史行情、实时行情
- ✅ **财务数据**：财务报表、财务指标

#### 访问限制
- **认证方式**：需要注册账号
- **频率限制**：根据账号等级
- **IP 限制**：无特殊 IP 限制

#### 优缺点分析

**优点**：
- ✅ 数据完整、准确
- ✅ 支持多市场
- ✅ 支持全量股票列表
- ✅ 数据质量高

**缺点**：
- ❌ 需要注册账号
- ❌ 免费版可能有功能限制
- ❌ 主要面向量化交易场景

#### 可维护性
- **社区活跃度**：⭐⭐⭐⭐（活跃）
- **更新频率**：⭐⭐⭐⭐（持续更新）
- **文档质量**：⭐⭐⭐⭐（文档完善）
- **代码可读性**：⭐⭐⭐⭐（代码清晰）

---

### 12. 米筐数据

#### 基本信息
- **官网**：https://www.ricequant.com/
- **语言**：Python
- **许可证**：免费/付费

#### 市场覆盖
- ✅ **A 股**：完整支持
- ✅ **港股**：支持
- ✅ **美股**：支持

#### 核心功能
- ✅ **股票基本信息**：股票代码、名称、行业等
- ✅ **全量股票列表**：支持获取全量股票列表
- ✅ **行情数据**：历史行情、实时行情
- ✅ **财务数据**：财务报表、财务指标

#### 访问限制
- **认证方式**：需要注册账号
- **频率限制**：根据账号等级
- **IP 限制**：无特殊 IP 限制

#### 优缺点分析

**优点**：
- ✅ 数据完整、准确
- ✅ 支持多市场
- ✅ 支持全量股票列表
- ✅ 数据质量高

**缺点**：
- ❌ 需要注册账号
- ❌ 免费版可能有功能限制
- ❌ 主要面向量化交易场景

#### 可维护性
- **社区活跃度**：⭐⭐⭐⭐（活跃）
- **更新频率**：⭐⭐⭐⭐（持续更新）
- **文档质量**：⭐⭐⭐⭐（文档完善）
- **代码可读性**：⭐⭐⭐⭐（代码清晰）

---

## 数据源对比总结

| 数据源 | 市场覆盖 | 全量列表 | 认证要求 | 费用 | 稳定性 | 数据完整性 | 推荐度 |
|--------|---------|---------|---------|------|--------|-----------|--------|
| **Tushare** | A 股 | ✅ | Token | 免费（积分制） | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **akshare** | A股/港股/美股 | ✅ | 无 | 免费 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **easyquotation** | A 股 | ❌ | 无 | 免费 | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ |
| **yfinance** | 美股/港股 | ✅ | 无 | 免费 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| **Alpha Vantage** | 美股 | ❌ | API Key | 免费/付费 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ |
| **IEX Cloud** | 美股 | ✅ | API Key | 免费/付费 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| **Polygon.io** | 美股 | ✅ | API Key | 付费 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐ |
| **Finnhub** | 美股 | ❌ | API Key | 免费/付费 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ |
| **聚宽数据** | A股/港股/美股 | ✅ | 账号 | 免费/付费 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| **米筐数据** | A股/港股/美股 | ✅ | 账号 | 免费/付费 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |

## 推荐数据源组合方案

### 方案一：A 股优先（推荐用于生产环境）

**A 股市场**：
1. **主数据源**：Tushare（如果已配置 token）
2. **备用数据源1**：akshare（如果 Tushare 不可用）
3. **备用数据源2**：easyquotation（仅用于实时行情补充）

**美股市场**：
1. **主数据源**：yfinance（保持现有）
2. **备用数据源**：IEX Cloud（如果已配置 API Key）

**港股市场**：
1. **主数据源**：yfinance（保持现有）
2. **备用数据源**：akshare

**优势**：
- A 股数据最完整、最准确
- 支持全量股票列表
- 数据源稳定可靠
- 多层容错机制

**劣势**：
- 需要 Tushare token（A 股主数据源）
- 如果未配置 token，需要依赖 akshare

### 方案二：免费优先（推荐用于开发/测试环境）

**A 股市场**：
1. **主数据源**：akshare
2. **备用数据源**：easyquotation（仅用于实时行情）

**美股市场**：
1. **主数据源**：yfinance
2. **备用数据源**：Alpha Vantage（如果已配置 API Key）

**港股市场**：
1. **主数据源**：yfinance
2. **备用数据源**：akshare

**优势**：
- 完全免费，无需注册（或仅需免费注册）
- 支持多市场
- 适合开发和测试

**劣势**：
- 数据来源可能不稳定（依赖第三方网站）
- 可能被反爬虫机制影响
- 免费 API 有频率限制

### 方案三：混合方案（推荐用于生产环境，兼顾质量和成本）

**A 股市场**：
1. **主数据源**：Tushare（如果已配置 token）
2. **备用数据源1**：akshare
3. **备用数据源2**：easyquotation（仅用于实时行情）

**美股市场**：
1. **主数据源**：IEX Cloud（如果已配置 API Key，免费版 50,000 次/月）
2. **备用数据源1**：yfinance
3. **备用数据源2**：Alpha Vantage（如果已配置 API Key）

**港股市场**：
1. **主数据源**：yfinance
2. **备用数据源**：akshare

**优势**：
- 兼顾数据质量和可用性
- 多层容错机制
- 适合生产环境
- 免费版 API 额度较高

**劣势**：
- 需要注册多个 API Key（但都是免费的）
- 配置相对复杂

### 方案四：量化平台方案（如果已有量化平台账号）

**A 股市场**：
1. **主数据源**：聚宽数据 或 米筐数据（如果已有账号）
2. **备用数据源**：akshare

**美股市场**：
1. **主数据源**：聚宽数据 或 米筐数据（如果已有账号）
2. **备用数据源**：yfinance

**港股市场**：
1. **主数据源**：聚宽数据 或 米筐数据（如果已有账号）
2. **备用数据源**：yfinance

**优势**：
- 数据质量高，统一接口
- 支持多市场
- 适合已有量化平台账号的用户

**劣势**：
- 需要注册账号
- 免费版可能有功能限制

## 实施建议

### 第一阶段：核心数据源（必须实现）

1. **akshare**（A 股主数据源，如果无 Tushare token）：
   - 免费，无需认证
   - 支持多市场（A 股、港股、美股）
   - 支持全量股票列表
   - 社区活跃，持续更新
   - **优先级**：⭐⭐⭐⭐⭐

2. **yfinance**（美股/港股主数据源，已实现）：
   - 继续支持美股和港股
   - 作为 A 股数据源的补充（如果其他数据源失败）
   - **优先级**：⭐⭐⭐⭐⭐

### 第二阶段：增强数据源（推荐实现）

3. **Tushare**（A 股主数据源，如果已配置 token）：
   - 数据最完整、最准确
   - 支持全量股票列表
   - 适合作为 A 股主数据源
   - **优先级**：⭐⭐⭐⭐（如果已配置 token）

4. **IEX Cloud**（美股备用数据源，如果已配置 API Key）：
   - 免费版额度较高（50,000 次/月）
   - 数据质量高
   - 支持全量股票列表
   - **优先级**：⭐⭐⭐⭐（如果已配置 API Key）

### 第三阶段：可选数据源（按需实现）

5. **easyquotation**（A 股实时行情补充）：
   - 仅用于实时行情补充
   - 如果不需要实时行情，可以跳过
   - **优先级**：⭐⭐⭐

6. **Alpha Vantage**（美股备用数据源，如果已配置 API Key）：
   - 免费版可用（频率限制较严格）
   - 作为美股备用数据源
   - **优先级**：⭐⭐⭐（如果已配置 API Key）

7. **聚宽数据 / 米筐数据**（如果已有账号）：
   - 数据质量高，统一接口
   - 支持多市场
   - **优先级**：⭐⭐⭐（如果已有账号）

### 实施顺序建议

1. **第一步**：实现 akshare 适配器（A 股主数据源）
2. **第二步**：保留并重构 yfinance 适配器（美股/港股主数据源）
3. **第三步**：实现 Tushare 适配器（如果已配置 token）
4. **第四步**：实现 IEX Cloud 适配器（如果已配置 API Key）
5. **第五步**：实现 easyquotation 适配器（可选，仅用于实时行情）
6. **第六步**：实现其他数据源适配器（按需）

## 数据源分类总结

### 按市场分类

#### A 股市场数据源
- **专业平台**：Tushare（推荐，需要 token）、聚宽数据、米筐数据
- **开源免费**：akshare（推荐，无需认证）、easyquotation（实时行情）
- **爬虫方案**：东方财富网、新浪财经、腾讯财经（通过 akshare 等封装使用）

#### 美股市场数据源
- **免费开源**：yfinance（推荐，已使用）
- **免费 API**：IEX Cloud（推荐，免费版额度高）、Alpha Vantage、Finnhub
- **付费 API**：Polygon.io（数据质量高，但需付费）

#### 港股市场数据源
- **免费开源**：yfinance（推荐，已使用）、akshare（部分支持）
- **其他**：富途 API、雪球 API（需要爬虫或 API）

### 按认证要求分类

#### 无需认证
- akshare、easyquotation、yfinance、东方财富网（通过爬虫）

#### 需要免费注册/API Key
- Tushare（token）、IEX Cloud（API Key）、Alpha Vantage（API Key）、Finnhub（API Key）

#### 需要付费
- Polygon.io、聚宽数据（部分功能）、米筐数据（部分功能）

### 按数据完整性分类

#### 支持全量股票列表
- Tushare、akshare、IEX Cloud、Polygon.io、聚宽数据、米筐数据、yfinance

#### 不支持全量股票列表（需要提供股票代码）
- easyquotation、Alpha Vantage、Finnhub

## 下一步行动

1. ✅ 完成数据源调研（本文档，已扩展）
2. ⏳ “免费优先、无需认证”为第一优先级，需要注册API Key，并存在限制的为第二优先级。按照这个优先级，更新技术方案设计和技术路线。
3. ⏳ 开始实现数据源适配器

---

**调研完成时间**：2024年  
**调研人员**：AI Assistant  
**调研版本**：v2.0（扩展版，新增 8+ 个数据源）
